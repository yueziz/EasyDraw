# ğŸ¨ EasyDraw - Vector Graphics System

**EasyDraw** æ˜¯ä¸€ä¸ªåŸºäº Windows MFC æ¡†æ¶å’Œ GDI+ å›¾å½¢å¼•æ“å¼€å‘çš„è½»é‡çº§é¢å‘å¯¹è±¡çŸ¢é‡ç»˜å›¾ç³»ç»Ÿã€‚

è¯¥é¡¹ç›®æ—¨åœ¨æ¼”ç¤ºç°ä»£ C++ (Smart Pointers) åœ¨ä¼ ç»Ÿ MFC æ¡†æ¶ä¸­çš„åº”ç”¨ï¼Œå¹¶å®ç°äº†ç»å…¸çš„è®¾è®¡æ¨¡å¼ï¼ˆå·¥å‚æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ï¼‰ä»¥æ”¯æŒå¯æ‰©å±•çš„å›¾å½¢ç³»ç»Ÿå’Œæ’¤é”€/é‡åšåŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§ (Features)

* **ğŸ› ï¸ å¤šç§ç»˜å›¾å·¥å…·**ï¼šæ”¯æŒç›´çº¿ã€çŸ©å½¢ã€æ¤­åœ†ã€éšæ‰‹ç”» (Freehand) ç­‰åŸºç¡€å›¾å½¢ç»˜åˆ¶ã€‚

* **ğŸ¨ æ ·å¼æ§åˆ¶**ï¼šæ”¯æŒç”»ç¬”é¢œè‰²åˆ‡æ¢ï¼ˆçº¢/è“ï¼‰åŠçº¿å®½è°ƒæ•´ï¼ˆç²—/ç»†ï¼‰ã€‚

* **â†©ï¸ æ’¤é”€ä¸é‡åš**ï¼šåŸºäºå‘½ä»¤æ¨¡å¼ (Command Pattern) å®ç°æ— é™çº§ï¼ˆå—å†…å­˜é™åˆ¶ï¼‰æ’¤é”€/é‡åšã€‚

* **ğŸ’¾ æŒä¹…åŒ–å­˜å‚¨**ï¼šæ”¯æŒè‡ªå®šä¹‰æ ¼å¼çš„æ–‡ä»¶ä¿å­˜ (Save) ä¸åŠ è½½ (Load)ï¼Œå®ç°å›¾å½¢æ•°æ®çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚

* **âš¡ é«˜æ•ˆæ¸²æŸ“**ï¼šé‡‡ç”¨åŒç¼“å†²æŠ€æœ¯ (Double Buffering) å½»åº•æ¶ˆé™¤ç»˜å›¾é—ªçƒï¼Œåˆ©ç”¨ GDI+ å®ç°æŠ—é”¯é½¿æ¸²æŸ“ã€‚

* **ğŸŒ å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒä¸­æ–‡/è‹±æ–‡ç•Œé¢åŠ¨æ€åˆ‡æ¢ï¼ˆè§£å†³äº† MFC èœå•èµ„æºå¥æŸ„ç®¡ç†çš„ Crash é—®é¢˜ï¼‰ã€‚

* **ğŸ–±ï¸ äº¤äº’ä½“éªŒ**ï¼šæ”¯æŒé¼ æ ‡æ‹–æ‹½å®æ—¶é¢„è§ˆç»˜å›¾æ•ˆæœã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ä¸æŠ€æœ¯æ ˆ (Architecture)

### æŠ€æœ¯æ ˆ

* **è¯­è¨€æ ‡å‡†**: C++14 / C++17

* **UI æ¡†æ¶**: Microsoft Foundation Classes (MFC)

* **å›¾å½¢å¼•æ“**: GDI+ (å°è£…ä¸º `CGdiObjectWrapper` å®ç° RAII èµ„æºç®¡ç†)

* **å•å…ƒæµ‹è¯•**: GoogleTest (gtest)

### è®¾è®¡æ¨¡å¼ (Design Patterns)

æœ¬é¡¹ç›®ä¸¥æ ¼éµå¾ª **SOLID** åŸåˆ™ï¼Œåº”ç”¨äº†ä»¥ä¸‹è®¾è®¡æ¨¡å¼ï¼š

1. **å·¥å‚æ¨¡å¼ (Factory Pattern)**:

   * `ShapeFactory` ç±»è´Ÿè´£æ ¹æ® `ShapeType` æšä¸¾åˆ›å»ºå…·ä½“çš„å›¾å½¢å¯¹è±¡ (`LineShape`, `RectShape` ç­‰)ï¼Œå®ç°äº†å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ã€‚

2. **å‘½ä»¤æ¨¡å¼ (Command Pattern)**:

   * é€šè¿‡ `IAppCommand` æ¥å£å’Œ `DrawCommand` ç±»å°è£…ç”¨æˆ·çš„ç»˜å›¾è¯·æ±‚ã€‚

   * `CommandManager` ä½¿ç”¨åŒæ ˆç»“æ„ (`undoStack`, `redoStack`) ç®¡ç†æ“ä½œå†å²ã€‚

3. **åŸå‹æ¨¡å¼ (Prototype Pattern)**:

   * `IShape::Clone()` æ¥å£æ”¯æŒå¯¹è±¡çš„æ·±æ‹·è´ï¼Œç”¨äºé¢„è§ˆå’Œæ½œåœ¨çš„å¤åˆ¶ç²˜è´´åŠŸèƒ½ã€‚

4. **MVC å˜ä½“ (Document-View)**:

   * **Model**: `Core.h` ä¸­çš„å›¾å½¢ç±»åŠ `CEasyDrawDoc` (æ•°æ®ç®¡ç†)ã€‚

   * **View**: `CEasyDrawView` (æ¸²æŸ“ä¸äº¤äº’)ã€‚

   * **Controller**: æ¶ˆæ¯æ˜ å°„æœºåˆ¶å¤„ç†ç”¨æˆ·è¾“å…¥ã€‚

## ğŸ§ª å•å…ƒæµ‹è¯•ä¸ä»£ç è´¨é‡ (Unit Testing)

é¡¹ç›®é›†æˆäº† **GoogleTest** æ¡†æ¶ï¼Œé’ˆå¯¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è¿›è¡Œäº†ä¸¥æ ¼çš„å•å…ƒæµ‹è¯•ï¼Œä»£ç è¦†ç›–ç‡ **> 70%**ã€‚

* **æµ‹è¯•èŒƒå›´**:

  * `ShapeFactory`: éªŒè¯æ‰€æœ‰å›¾å½¢ç±»å‹çš„åˆ›å»ºé€»è¾‘åŠè¾¹ç•Œæ¡ä»¶ã€‚

  * `Serializer`: éªŒè¯æ–‡ä»¶ä¿å­˜ä¸è¯»å–çš„æ•°æ®ä¸€è‡´æ€§ï¼ˆé›†æˆæµ‹è¯•ï¼‰ã€‚

* **è¿è¡Œæµ‹è¯•**:

  * æ‰“å¼€ Visual Studio çš„â€œæµ‹è¯•èµ„æºç®¡ç†å™¨â€ (Test Explorer)ã€‚

  * è¿è¡Œ `EasyDrawTests` é¡¹ç›®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)

### ç¯å¢ƒè¦æ±‚

* Visual Studio 2019 æˆ– 2022

* å·¥ä½œè´Ÿè½½ï¼šä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘ (Desktop development with C++)

* ç»„ä»¶ï¼šMFC for v142/v143 build tools

### ç¼–è¯‘ä¸è¿è¡Œ

1. å…‹éš†æœ¬ä»“åº“ï¼š

2. ä½¿ç”¨ Visual Studio æ‰“å¼€ `EasyDraw.sln`ã€‚

3. ç¡®ä¿å¯åŠ¨é¡¹ç›®è®¾ç½®ä¸º **EasyDraw**ã€‚

4. é€‰æ‹©é…ç½® (Debug/Release, x64/x86)ã€‚

5. ç‚¹å‡» **è¿è¡Œ (F5)**ã€‚

### è¿è¡Œå•å…ƒæµ‹è¯•

1. åœ¨è§£å†³æ–¹æ¡ˆä¸­å³é”®ç‚¹å‡» `EasyDrawTests` é¡¹ç›®ã€‚

2. é€‰æ‹© **ç”Ÿæˆ (Build)**ã€‚

3. æ‰“å¼€èœå•æ  `æµ‹è¯• (Test)` -> `è¿è¡Œæ‰€æœ‰æµ‹è¯• (Run All Tests)`ã€‚

## ğŸ“‚ é¡¹ç›®ç»“æ„ (Project Structure)

 EasyDraw/
 
 â”œâ”€â”€ Core.h              # æ ¸å¿ƒæ¨¡å‹å®šä¹‰ (IShape, ShapeFactory, CommandManager)
 
 â”œâ”€â”€ Serializer.h/.cpp   # æ–‡ä»¶åºåˆ—åŒ–é€»è¾‘
 
 â”œâ”€â”€ EasyDrawDoc.h/.cpp  # æ–‡æ¡£ç±» (ç®¡ç†æ•°æ®æ¨¡å‹)
 
 â”œâ”€â”€ EasyDrawView.h/.cpp # è§†å›¾ç±» (å¤„ç†ç»˜å›¾äº¤äº’ä¸æ¸²æŸ“)
 
 â”œâ”€â”€ MainFrm.h/.cpp      # ä¸»æ¡†æ¶çª—å£ (å¤„ç†èœå•ä¸å¤šè¯­è¨€)
 
 â”œâ”€â”€ EasyDraw.h/.cpp     # åº”ç”¨ç¨‹åºå…¥å£ä¸ GDI+ åˆå§‹åŒ–
 
 â””â”€â”€ res/                # èµ„æºæ–‡ä»¶ (å›¾æ ‡, èœå•, å­—ç¬¦ä¸²è¡¨)

 
 EasyDrawTests/          # å•å…ƒæµ‹è¯•é¡¹ç›®
 
 â”œâ”€â”€ UnitTests.cpp       # GoogleTest æµ‹è¯•ç”¨ä¾‹
 
 â””â”€â”€ ...


## ğŸ“· æˆªå›¾ (Screenshots)

### ä¸»ç•Œé¢ä¸ç»˜å›¾

<img width="1886" height="990" alt="image" src="https://github.com/user-attachments/assets/6d4920d8-c41d-42aa-8d6d-ca16b24b3d85" />


### å•å…ƒæµ‹è¯•é€šè¿‡

<img width="1315" height="696" alt="image" src="https://github.com/user-attachments/assets/6efe38ef-3c51-4626-882d-fcb981d8c96d" />

<img width="1493" height="155" alt="d659b593bb3a560a2747be612e2a98d2" src="https://github.com/user-attachments/assets/aeb75eb8-686d-4e87-b571-93f28553b497" />

<img width="1511" height="181" alt="9bbe970dc7fd0446f3cfcad158f0c13d" src="https://github.com/user-attachments/assets/3820db82-3512-477d-8594-d126ec67a747" />
